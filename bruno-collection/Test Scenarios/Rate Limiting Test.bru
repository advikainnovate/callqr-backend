meta {
  name: Rate Limiting Test
  type: http
  seq: 4
}

post {
  url: {{apiUrl}}/auth/login
  body: json
  auth: none
}

headers {
  Content-Type: application/json
}

body:json {
  {
    "email": "nonexistent@example.com",
    "password": "wrongpassword"
  }
}

tests {
  test("Should handle rate limiting gracefully", function() {
    // After multiple failed attempts, should return 429
    expect(res.getStatus()).to.be.oneOf([401, 429]);
  });
  
  test("Should return appropriate error message", function() {
    if (res.getStatus() === 429) {
      expect(res.getBody().error).to.include("rate limit");
    }
  });
}